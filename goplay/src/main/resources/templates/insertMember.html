<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
   <head>
   <meta charset="utf-8">


<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
    <style>
        .fieldError {
            color: #bd2130;
        }
    </style>
</th:block>

<!-- 사용자 스크립트 추가 -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 <script th:inline="javascript">
    /*<![CDATA[*/
        $(document).ready(function(){
        	
            var errorMessage = /*[[${errorMessage}]]*/'default';
            
            if(errorMessage != null){
                alert(errorMessage);
            }
        });
        /*]]>*/
    </script>
    
      <script type="text/javascript">
         $(function(){
            //시도 지역선택 드롭다운 리스트
            $.ajax({
               url:"/listCity",
               success: function(data){
                  $.each(data,function(){
                     let option = $("<option></option>");
                     option.html(this.acName);
                     option.attr("value",this.acName);
                     $("#mbLoc1").append(option);
                  });
               }
            });

            //시도 지역분류 선택 시 세부지역 출력
            $(document).on("change", "#loc1", function (){
               $("#mbLoc2").empty();
               let acName = $(this).val()
               $.ajax({
                  url:"/listDistrict/"+acName,
                  success: function(data) {
                     let district = data[0].address_district;
                     $.each(district,function(){
                        let option = $("<option></option>");
                        option.html(this.adName);
                        option.attr("value",this.adName);
                        $("#mbLoc2").append(option);
                     });
                  }
               });
            });

            //시도 지역선택 초기 값에 따라 서울특별시 세부지역 표시
            $.ajax({
               url:"/listDistrict/"+"서울특별시",
               success: function(data) {
                  let district = data[0].address_district;
                  $.each(district,function(){
                     let option = $("<option></option>");
                     option.html(this.adName);
                     option.attr("value",this.adName);
                     $("#mbLoc2").append(option);
                  });
               }
            });

            //인원선택 버튼 클릭 시 동호회 회원 표시
            $('#selectMember').click(function(){
               $("#memberList").empty();
               let cNo =  1;
               $.ajax({
                  url:"/listClubMemberlist/"+cNo,
                  success: function(data){
                     $.each(data, function(){
                        let div = $("<div></div>").addClass("col-sm-4 div-memberList");
                        let checkBox = $("<input>").attr("type","checkbox").attr("value", this.id).attr("id",this.id).addClass("memberCheck");
                        let label = $("<label></label>").addClass("form-check-label").attr("for",this.id).html("&nbsp;&nbsp;"+this.id);
                        $(div).append(checkBox);
                        $(div).append(label);
                        $("#memberList").append(div);
                     });
                  }
               });
            });





         });

      </script>


<script type="text/javascript">

const autoHyphen = (target) => {
	 target.value = target.value
	   .replace(/[^0-9]/g, '')
	   .replace(/^(\d{2,3})(\d{3,4})(\d{4})$/, `$1-$2-$3`);
	}
	
	
let idCheck = /^[a-z_-]+[a-z0-9_-]{5,20}$/g; //	let idCheck = /[A-Za-z_-]{5,20}$/;	최소5자, 최대 10자의 문자
let pwCheck = /^(?=.*[a-zA-Z]{1,11})(?=.*[0-9]{1,11}).{6,12}$/;	//	숫자, 영문 각 1개 이상, 11개 이하 사용하여 6자리 이상, 12자 이하로 입력
let numberCheck = /^[0-9]{1,4}$/;	//	숫자만 입력해야하는 경우
let hanguel = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힝]/;	//	한글테스트
let nameCheck = /[가-힝]/; 	//	한글, 영어만
let phoneCheck = /^\d{3}-\d{3,4}-\d{4}$/;
let emailCheck = /^[a-zA-Z0-9+-\_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;

		function check(){
			
			
			if($('#id').val() == ''){
    			alert("아이디는 필수입력값입니다.");
        		return false;
    		}
    		
    		if($('#pwd').val() == ''){
    			alert("비밀번호는 필수입력값입니다.");
        		return false;

    		}
    		
    		if($('#mName').val() == ''){
    			alert("이름은 필수입력값입니다.");
        		return false;
    		}
    		
    		if($('#email').val() == ''){
    			alert("이메일은 필수입력값입니다.");
        		return false;
    		}
    		if($('#nickname').val() == ''){
    			alert("닉네임은 필수입력값입니다.");
        		return false;
    		}
    		if($('#birth_date').val() == ''){
    			alert("날짜를 선택해주세요");
    			return false;
    		}
    		
    		if($('#gender').val() == ''){
    			alert("성별을 선택해주세요");
    			return false;
    		}
    		
    		if($('.redtext').text() != ''){
    	    	alert("폼 양식에 맞춰 입력해주세요");
    			return false;
    	    }
    		
    		
    		return true;
    		
    	};
    	
    	
    	$(function (){
    		
    		
    		
    	
    	
    	$('#id').keyup(function(){
    		
    		if(hanguel.test($('#id').val())){
    			$('#idcheck').attr('style','color:#B70000');
        		$('#idcheck').text('5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.');
        		return false;
    		}
	    	else {
				$('#idcheck').empty();
			}
			
        	if($('#id').val().toString().length < 5){
        		$('#idcheck').attr('style','color:#B70000');
    			$('#idcheck').text('5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.');
    			//$('#idcheck').removeAttr('class');	//	idSub의 class속성을 지운다.
    			return false;
    		} else if($('#id').val().toString().length > 20){
    			$('#idcheck').attr('style','color:#B70000');
    			$('#idcheck').text('5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.');
    			//$('#idcheck').removeAttr('class');	//	idSub의 class속성을 지운다.
    			return false;
        	}
                
    		else {
    			$('#idcheck').empty();
    		}
         	
        	
    	});
    	
    	
    	if($('#pwd').val() == ''){
	    	$('#pwd').keyup(function() {		//	비밀번호
	    		if ($('#pwd').val() != ''){
	    			if(!pwCheck.test($('#pwd').val())){
	    				$('#pwdcheck').attr('style','color:#B70000');
	            		$('#pwdcheck').text('6~12자 영문과 숫자를 사용하세요.');
	            		return false;
	    			} else {
	    				$('#pwdcheck').empty();
	    			}
	    		}
	    	});
    	};
    	$('#mName').keyup(function() {		//	이름
    		if ($('#mName').val() != ''){
    			if(!nameCheck.test($('#mName').val())){
    				$('#mnamecheck').attr('style','color:#B70000');
            		$('#mnamecheck').text('이름은 한글만 사용가능합니다.');
            		return false;
    			} else {
    				$('#mnamecheck').empty();
    			}
    		}
    	});
    	
    	$('#email').keyup(function() {		//	이메일
    		if ($('#email').val() != ''){
    			if(!emailCheck.test($('#email').val())){
    				$('#emailcheck').attr('style','color:#B70000');
            		$('#emailcheck').text('이메일양식을 지켜주세요.');
            		return false;
    			} else {
    				$('#emailcheck').empty();
    			}
    		}
    	});
    	
    	$('#phone').keyup(function() {		//	핸드폰
    		if ($('#phone').val() != ''){
    			if(!phoneCheck.test($('#phone').val())){
    				$('#phonecheck').attr('style','color:#B70000');
            		$('#phonecheck').text('핸드폰번호 11자리를 입력해주세요');
            		return false;
    			} else {
    				$('#phonecheck').empty();
    			}
    		}
    	});
    	
    	$('#nickname').keyup(function() {		//	닉네임
    		if ($('#nickname').val() != ''){
    			if(!nameCheck.test($('#nickname').val())){
    				$('#nicknamecheck').attr('style','color:#B70000');
            		$('#nicknamecheck').text('닉네임은 한글만 사용가능합니다.');
            		return false;
    			} else {
    				$('#nicknamecheck').empty();
    			}
    		}
    	});
    	
    	
        	
       });
    	
    	
    	
    	
    	
    	
</script>
  
   </head>
   <body>
    


    <form action="/insertMember" id="submit" method="post"  th:object="${memberDTO}" onsubmit="return check();">
    	<div class="form-group">
            <label th:for="id">아이디</label>
            <input type="text" th:field="*{id}" class="form-control" placeholder="아이디를 입력해주세요">
            <p id="idcheck" class="redtext"></p>
            <p id="idblank" class="redtext"></p>
        </div>
         <div class="form-group">
            <label th:for="pwd">비밀번호</label>
            <input type="password" th:field="*{pwd}" class="form-control" placeholder="비밀번호 입력">
            <p id="pwdcheck" class="redtext"></p>
        </div>
        <div class="form-group">
            <label th:for="mName">이름</label>
            <input type="text" th:field="*{mName}" class="form-control" placeholder="이름을 입력해주세요">
            <p id="mnamecheck" class="redtext"></p>
        </div>
         <div class="form-group">
            <label th:for="phone">핸드폰번호</label>
            <input type="text" th:field="*{phone}" class="form-control" placeholder="핸드폰번호 입력" oninput="autoHyphen(this)" maxlength="13">
            <p id="phonecheck" class="redtext"></p>
        </div>
        <div class="form-group">
            <label th:for="email">이메일주소</label>
            <input type="email" th:field="*{email}" class="form-control" placeholder="이메일을 입력해주세요">
            <p id="emailcheck" class="redtext"></p>
        </div>
      
         <div class="form-group">
            <label th:for="nickname">닉네임</label>
            <input type="text" th:field="*{nickname}" class="form-control" placeholder="닉네임 입력">
            <p id="nicknamecheck" class="redtext"></p>
            
        </div>
         <div class="form-group">
            <label th:for="birth_date">생년월일</label>
            <input type="date"  th:field="*{birth_date}" class="form-control">
        </div>
        <div class="form-group">
            <label th:for="gender">성별</label>
            <select th:field="*{gender}" class="form-control" th:value="${gender}">
            	<option th:value="남성" selected>남성</option>
                <option th:value="여성">여성</option>
            </select>
        </div>
         <div class="form-group">
        
      		<label th:for="soccer">축구</label>
      		<input type="checkbox" name="soccer" value='1' id="soccer"/>
			<input type="hidden" name="soccer" value='0' id="soccer_hidden"/>
      		 <label for="soccer" class="form-check-label"></label>
      
        
      		<label th:for="footsal">풋살</label>
      		<input type="checkbox" name="footsal" value='1' id="footsal"/>
			<input type="hidden" name="footsal" value='0' id="footsal_hidden"/>
      		 <label for="footsal" class="form-check-label"></label>
      
        
      		<label th:for="bascketball">야구</label>
      		<input type="checkbox" name="bascketball" value='1' id="bascketball"/>
			<input type="hidden" name="bascketball" value='0' id="bascketball_hidden"/>
      		 <label for="bascketball" class="form-check-label"></label>
      	
        
      		<label th:for="footvalleyball">족구</label>
      		<input type="checkbox" name="footvalleyball" value='1' id="footvalleyball"/>
			<input type="hidden" name="footvalleyball" value='0' id="footvalleyball_hidden"/>
      		 <label for="footvalleyball" class="form-check-label"></label>
      	</div> 
      	
      	                           <div class="row">
                              <div class="col-sm-6 mb-2">
                                 <div class="js-form-message">
                                    <label class="form-label font-weight-bold">
                                       지역 선택
                                       <span class="text-danger">*</span>
                                    </label>
                                    <div class="form-group">
                                       <select class="custom-select" id="mbLoc1">

                                       </select>
                                    </div>
                                 </div>
                              </div>
                              <div class="col-sm-6 mb-2">
                                 <div class="js-form-message">
                                    <label class="form-label font-weight-bold">
                                       세부지역 선택
                                       <span class="text-danger">*</span>
                                    </label>
                                    <div class="form-group">
                                       <select class="custom-select" id="mbLoc2">

                                       </select>
      

        <div style="text-align: center">
            <input type="submit" class="btn btn-primary" value="submit"/>
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
    </form>   
   </body>
</html>